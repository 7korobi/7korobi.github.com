---
layout: post
title: "他PCからMySQLへ繋ぐ権限"
date: 2012-01-26 10:21
comments: true
categories: MySQL
---


こういったメッセージが出た場合、denyされている(denied)ので権限を付与しないと動作しない。

``` ruby
>> Model
ActiveRecord::StatementInvalid: 
  Mysql::Error: 
    SELECT command denied 
      to user 'root'@<hostname> 
      for table <models>
      : SHOW FIELDS FROM <models>
```


まずは状況確認から。

``` sh
% mysql -h <db_addr> -u root -p
Enter password:

mysql> show grants for root@<hostname>;
ERROR 1141 (42000): 
  There is no such grant defined 
    for user 'root' on host <hostname>
```

他の設定を参考にしてみる。 all privileges でいいだろう。

``` sh
mysql> show grants;
+---------------------------------------------------------------------+
| Grants for root@localhost                                           |
+---------------------------------------------------------------------+
| GRANT ALL PRIVILEGES ON *.* TO 'root'@'localhost' WITH GRANT OPTION |
+---------------------------------------------------------------------+
1 row in set (0.00 sec)
```

注意：このとき、することは２つある。

- ユーザーに権限を与える操作。
- 設定をデータベースに反映する操作。

``` mysql
mysql> grant all privileges 
         on *.* to root@<hostname> 
         identified by '<PASSWORD>';
```

``` mysql
mysql> flush privileges;
```

そして、接続テスト

``` mysql
% mysql -h <db_addr> -u root -p
Enter password:

mysql> show databases;
mysql> use <database_name>;
mysql> select * from <models> limit 1;
...
```